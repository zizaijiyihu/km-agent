# 提醒查询脚本使用说明

## 脚本位置
`/Users/xiaohu/projects/km-agent_2/reminder_repository/test/query_reminders.py`

## 功能说明
这个脚本用于查询和查看数据库中的提醒数据，支持：
- 查看所有提醒
- 查看指定用户的提醒（公开 + 私有）
- 查看单个提醒详情

## 使用方法

### 1. 查看所有提醒（默认）
```bash
cd /Users/xiaohu/projects/km-agent_2/reminder_repository/test
python3 query_reminders.py
# 或
python3 query_reminders.py --all
```

**输出示例：**
```
====================================================================================================
📋 所有提醒列表
====================================================================================================

共 8 条提醒

+------+----------------------------------+------------+-----------+---------------------+---------------------+
|   ID | 内容                             | 公开/私有  | 用户ID    | 创建时间            | 更新时间            |
+======+==================================+============+===========+=====================+=====================+
|    1 | 今天谁比较辛苦                   | 🌐 公开    | -         | 2025-12-04 10:00:00 | 2025-12-04 10:00:00 |
|    2 | 最近有什么AI新闻                 | 🌐 公开    | -         | 2025-12-04 10:05:00 | 2025-12-04 10:05:00 |
|    3 | 我的私人提醒                     | 🔒 私有    | huxiaoxiao| 2025-12-04 10:10:00 | 2025-12-04 10:10:00 |
+------+----------------------------------+------------+-----------+---------------------+---------------------+

📊 统计:
  - 公开提醒: 6 条
  - 私有提醒: 2 条

👤 私有提醒按用户统计:
  - huxiaoxiao: 2 条
```

### 2. 查看指定用户的提醒
```bash
python3 query_reminders.py --user huxiaoxiao
# 或
python3 query_reminders.py -u huxiaoxiao
```

**说明：** 返回所有公开提醒 + 该用户的私有提醒

### 3. 查看单个提醒详情
```bash
python3 query_reminders.py --id 1
# 或
python3 query_reminders.py -i 1
```

**输出示例：**
```
====================================================================================================
📋 提醒详情 (ID: 1)
====================================================================================================

ID: 1
内容: 今天谁比较辛苦
状态: 🌐 公开
用户ID: -
创建时间: 2025-12-04 10:00:00
更新时间: 2025-12-04 10:00:00
```

## 参数说明

| 参数 | 简写 | 说明 |
|------|------|------|
| `--all` | `-a` | 查询所有提醒（默认） |
| `--user <用户ID>` | `-u <用户ID>` | 查询指定用户的提醒 |
| `--id <提醒ID>` | `-i <提醒ID>` | 查询指定ID的提醒详情 |

## 提示

1. 如果想要更好的表格显示效果，可以安装 `tabulate`:
   ```bash
   pip install tabulate
   ```

2. 脚本会自动显示：
   - 🌐 公开提醒（绿色标识）
   - 🔒 私有提醒（橙色标识）
   - 统计信息（公开/私有数量）
   - 私有提醒按用户分组统计

## 数据库字段说明

- `id`: 提醒ID
- `content`: 提醒内容
- `is_public`: 是否公开（1=公开，0=私有）
- `user_id`: 用户ID（私有提醒时有值，公开提醒为NULL）
- `created_at`: 创建时间
- `updated_at`: 更新时间

## 当前数据库状态

根据最新查询，数据库中目前**暂无提醒数据**。

如果需要添加测试数据，可以：
1. 通过UI界面添加提醒
2. 使用API接口创建提醒
3. 运行测试脚本 `/Users/xiaohu/projects/km-agent_2/test/test_reminder_quick.py`
